<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Crash Game</title>
    <style>
        /* Basic styles */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        .game-container {
            position: relative;
            height: 400px;
            width: 100%;
            border: 1px solid #000;
        }
        #flight {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background-color: red;
            border-radius: 50%;
        }
        .status-text {
            margin-top: 20px;
            font-size: 18px;
        }
        #multiplierText {
            font-size: 24px;
        }
        .controls {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="game-container">
    <div id="flight"></div>
</div>

<div class="controls">
    <input type="number" id="betAmount" placeholder="Enter Bet Amount" />
    <button id="placeBtn" onclick="startGame()">Place Bet</button>
    <button id="cashOutBtn" onclick="cashOut()" style="display:none;">Cash Out</button>
</div>

<div class="status-text" id="statusText"></div>
<div id="multiplierText"></div>
<div class="status-text" id="balanceDisplay"></div>

<script>
    let balance = 100; // Example starting balance
    let betAmount;
    let multiplier;
    let hasCashedOut = false;
    let isPlaying = false;
    let crashPoint;
    let interval;
    let flight = document.getElementById('flight');
    let multiplierText = document.getElementById('multiplierText');
    let statusText = document.getElementById('statusText');
    let balanceDisplay = document.getElementById('balanceDisplay');
    const BTC_RATE = 20000; // Example BTC rate for conversion
    balanceDisplay.textContent = `$${balance.toFixed(2)}`;

    function startGame() {
        betAmount = parseFloat(document.getElementById('betAmount').value);

        if (isNaN(betAmount) || betAmount <= 0) {
            statusText.textContent = 'Please enter a valid bet amount.';
            return;
        }

        if (betAmount > balance) {
            statusText.textContent = 'Insufficient balance.';
            return;
        }

        multiplier = 1.00;
        hasCashedOut = false;
        isPlaying = true;
        crashPoint = (Math.random() * 5 + 1).toFixed(2);

        document.getElementById('placeBtn').style.display = 'none';
        document.getElementById('cashOutBtn').style.display = 'inline-block';
        statusText.textContent = `Game started. Try to cash out before it crashes! (Crash at ${crashPoint}x)`;

        // Start flight animation
        flight.style.transition = `transform ${crashPoint * 2}s linear`;
        flight.style.transform = `translateX(-50%) translateY(-${crashPoint * 50}px)`; // Move flight up

        interval = setInterval(() => {
            multiplier += 0.05;
            multiplierText.textContent = `Multiplier: ${multiplier.toFixed(2)}x`;

            if (multiplier >= crashPoint) {
                endGame(false);
                flight.style.transition = 'none'; // Stop animation at crash point
                flight.style.transform = `translateX(-50%) translateY(-${crashPoint * 50}px)`;
            }
        }, 100);
    }

    function cashOut() {
        if (!isPlaying || hasCashedOut) return;

        hasCashedOut = true;
        const winnings = betAmount * multiplier;
        balance += winnings - betAmount;

        endGame(true);
    }

    function endGame(cashedOut) {
        clearInterval(interval);
        isPlaying = false;
        document.getElementById('cashOutBtn').style.display = 'none';
        document.getElementById('placeBtn').style.display = 'inline-block';
        multiplierText.textContent = `Multiplier: ${multiplier.toFixed(2)}x`;

        if (cashedOut) {
            statusText.textContent = `You cashed out at ${multiplier.toFixed(2)}x! Winnings: $${(betAmount * multiplier).toFixed(2)}`;
        } else {
            balance -= betAmount;
            statusText.textContent = `Crashed at ${multiplier.toFixed(2)}x. You lost $${betAmount.toFixed(2)}.`;
        }

        const convertedBTC = balance / BTC_RATE;
        balanceDisplay.textContent = `$${balance.toFixed(2)}`;
    }
</script>
</body>
</html>
